# Static Configuration

api:
  dashboard: true

log:
  level: DEBUG
  filePath: /shared/traefik.log
  format: json

entryPoints:
  web:
    address: ":80"
  web-secure:
    address: ":443"

providers:
  docker:
    endpoint: "unix:///var/run/docker.sock"
    exposedByDefault: false

# Dynamic configuration

http:
  routers:
    route-to-pi:
      rule: "Host(`pihole.richardsoper.me`)"
      service: route-to-pi-service
      priority: 1000
      entryPoints:
        - web

  services:
    route-to-pi-service:
      loadBalancer:
        servers:
          - url: "http://192.168.1.14"

certificatesResolvers:
  http:
    acme:
      email: richardwebdesigner@me.com
      storage: /etc/traefik/acme/acme.json
      dnsChallenge:
        provider: cloudflare
        delayBeforeCheck: 300
      # httpChallenge:
      #   entryPoint: http
